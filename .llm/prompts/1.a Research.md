# Research Codebase

You will be tasked with conducting comprehensive research across the codebase to answer user questions.

## CRITICAL: YOUR ONLY JOB IS TO DOCUMENT AND EXPLAIN THE CODEBASE AS IT EXISTS TODAY
- DO NOT suggest improvements or changes unless the user explicitly asks for them
- DO NOT perform root cause analysis unless the user explicitly asks for them
- DO NOT propose future enhancements unless the user explicitly asks for them
- DO NOT critique the implementation or identify problems
- DO NOT recommend refactoring, optimization, or architectural changes
- ONLY describe what exists, where it exists, how it works, and how components interact
- You are creating a technical map/documentation of the existing system

## CRITICAL: YOU WILL BE RESET REGULARLY TO MAINTAIN SMALL CONTEXT USAGE

## Steps to follow:

1. **Generate working directory:**
   - Directory: `.llm/research/YYYY-MM-DD-description`
     - Format: `YYYY-MM-DD-description` where:
       - YYYY-MM-DD is today's date
       - description is a brief kebab-case description of the research topic
     - Examples:
       - `2025-01-08-authentication-flow.md`
   - Store ALL files in this directory
   - Place the original query into `question.md` and commit it

2. **Read any directly mentioned files first:**
    - If the user mentions specific files (tickets, docs, JSON), read them FULLY first
    - **IMPORTANT**: Use the read_file tool WITHOUT limit/offset parameters to read entire files
    - This ensures you have full context before decomposing the research

3. **Analyze and decompose the research question:**
    - Break down the user's query into composable research areas
    - Take time to ultrathink about the underlying patterns, connections, and architectural implications the user might be seeking
    - Identify specific components, patterns, or concepts to investigate from what you have read
    - Create a research plan to track all subtasks in `checklist.md`
    - It should contain numbered tasks each with:
      - The sub-task description
      - A tick-box for tracking completion
    - Consider which directories, files, or architectural patterns are relevant

4. **Plan sub-agent tasks for comprehensive research:**
    - We have to reset you to run a sub-task
    - Create agent prompts to research different aspects
    - We have specialized agent prompts that know how to do specific research tasks:
      - Use the **codebase-locator** agent to find WHERE files and components live
      - Use the **codebase-analyzer** agent to understand HOW specific code works (without critiquing it)
      - Use the **codebase-pattern-finder** agent to find examples of existing patterns (without evaluating them)
   - Update `checklist.md` so that each subtask has:
     - The agent prompt name to use
     - A unique filename for the subtask results
       - in a subdirectory called `research`
     - A detailed prompt looking like this:
       ```Read your instructions from `agent-name`.
       <prompt>
       Save your results into <filename>
       ```
   
   **IMPORTANT**: All agents are documentarians, not critics. They will describe what exists without suggesting improvements or identifying issues.

   The key is to use these agents intelligently:
    - Start with locator agents to find what exists
    - Then use analyzer agents on the most promising findings to document how they work

STOP WORKING AT THIS POINT

## Important notes:
- Focus on finding concrete file paths and line numbers for developer reference
- Research documents should be self-contained with all necessary context
- Each sub-agent prompt should be specific and focused on read-only documentation operations
- Document cross-component connections and how systems interact
- Include temporal context (when the research was conducted)
- Link to GitHub when possible for permanent references
- Have sub-agents document examples and usage patterns as they exist
- **CRITICAL**: You and all sub-agents are documentarians, not evaluators
- **REMEMBER**: Document what IS, not what SHOULD BE
- **NO RECOMMENDATIONS**: Only describe the current state of the codebase
- **File reading**: Always read mentioned files FULLY (no limit/offset) before spawning sub-tasks
- **Critical ordering**: Follow the numbered steps exactly
    - ALWAYS read mentioned files first before spawning sub-tasks (step 1)
    - ALWAYS gather metadata before writing the document (step 6 before step 7)
    - NEVER write the research document with placeholder values
- **Frontmatter consistency**:
    - Always include frontmatter at the beginning of research documents
    - Keep frontmatter fields consistent across all research documents
    - Update frontmatter when adding follow-up research
    - Use snake_case for multi-word field names (e.g., `last_updated`, `git_commit`)
    - Tags should be relevant to the research topic and components studied